/*! AirPorts 16-10-2014 */
$(function(){function e(e){$("#mainPage, div.posBgFirstPage, div.posBgFirstPageEnd").css({minHeight:"auto"==e?"100%":e,height:e}),document.body.scrollTop=0}var t=document.body.scrollHeight;$(window).on("orientationchange",function(){e(document.body.scrollHeight)}),e(t),$("#smsPage").on("touchmove",function(){$("div.posBgSecondPage").addClass("posBgFirstAnimate").addClass("posBgFirstAnimateEnd"),20>=document.body.scrollTop&&$("div.posBgSecondPage").removeClass("posBgFirstAnimate posBgFirstAnimateEnd")}).on("touchend",function(){20>=document.body.scrollTop&&$("div.posBgSecondPage").removeClass("posBgFirstAnimate posBgFirstAnimateEnd")}),$("#mainPage").on("touchmove",function(){$("div.posBgFirstPage").addClass("posBgFirstAnimate").addClass("posBgFirstAnimateEnd"),20>=document.body.scrollTop&&$("div.posBgFirstPage").removeClass("posBgFirstAnimate posBgFirstAnimateEnd")}).on("touchend",function(){20>=document.body.scrollTop&&$("div.posBgFirstPage").removeClass("posBgFirstAnimate posBgFirstAnimateEnd")}),$("#J_nextPageButton").click(function(){$("div.secondPageWrap").css({height:$("#smsPage").height()+40,zIndex:7}),$("div.posBgSecondPage").css({top:0}),$("#smsPage").css({bottom:-document.body.clientHeight}).animate({bottom:0},450),e($("#smsPage").height()),$("#smsPage, div.posBgSecondPage").removeClass("posBgFirstAnimate posBgFirstAnimateEnd"),$("#mainPage, div.posBgFirstPage").removeClass("topSlide").removeClass("topEnd")}),$("p.abordTime, div.abordTimeBig").text(Math.floor(24*Math.random())+":00"),$("p.targetPlace").text(Math.floor(24*Math.random())+":00"),$("p.localWeather b").text(Math.floor(35*Math.random())),$(this).delegate("#J_smsMe","click",function(){$(this).parent().html($("#enterPhoneNumber").html()).find("#J_phoneNumber").focus()}).delegate("#J_sendSms","click",function(e){e.stopPropagation();var t=$("#J_phoneNumber").val();$(this).parent().html($("#phoneNumberSuccuss").html().replace("{{{val}}}",t))}),$(this).delegate("#J_flightsInfo li","tap",function(t){t.stopPropagation();var i=$(this),n=i.find("span.flyIcon img").attr("src"),o=i.find("span.flyFlag").text(),s=i.find("p.placeName").text(),a=i.find("p.timeInfo").text();$("#J_flightLogo").find("img").attr("src",n),$("#J_flagNum").text(o),/晚点/.test(a)?$("#J_timeInfo").addClass("font-onlate").text(a.replace(/\s.*/g,"")):$("#J_timeInfo").removeClass("font-onlate").text(a),$("#J_targetPlace").text(s),$("div.secondPageWrap").css({zIndex:2}),$("div.posBgFirstPage").addClass("topSlide").addClass("topEnd").removeClass("posBgFirstAnimate").removeClass("posBgFirstAnimateEnd"),$("#mainPage").addClass("topSlide").addClass("topEnd"),e("auto")})});