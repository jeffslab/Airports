<!DOCTYPE>
<html>
    <head>
        <title>候机服务</title>
        <meta charset="utf-8" /> 
        <meta name="viewport" content="width=device-width,initial-scale=1.0, user-scalable=no"/>
        <link rel="stylesheet" href="../style/index.css"/> 
        <script src="../lib/jquery.js"></script>
        <script src="../lib/jqmobile/jquery.mobile.custom.js"></script>
        <script src="../lib/iscroll.js"></script>
        <link rel="stylesheet" href="../lib/jqmobile/jquery.mobile.custom.structure.css"/>
        <link rel="stylesheet" href="../lib/jqmobile/jquery.mobile.custom.theme.css"/>
        <script>
            (function () {
                var adjust = function () {
                    var width, dom = document.getElementsByTagName("html")[0];
                    return function () {
                        var w = Math.min(dom.offsetWidth, 480);
                        if (width != w) {
                            width = w;
                            dom.style.fontSize = (20 / 720 * width) + "px";
                        }
                    };
                } ();
                adjust();
                window.addEventListener("resize", function () { setTimeout(adjust, 200); }, false);
            } ());
        </script>
        <style>
            body{
            -webkit-text-size-adjust:none; 
            }
            .bg-2{
                width:100%;
                height:100%;
                background:url('../res/bg-emergency.jpg') no-repeat left top;
                -webkit-background-size:cover;
                background-size:cover;
                -webkit-transition:all .3s linear; 
                transition:all .3s linear;
            } 
            .bg-3{
                width:100%;
                height:100%;
                background:url('../res/bg-lost.jpg') no-repeat left top;
                -webkit-background-size:cover;
                background-size:cover; 
                -webkit-transition:all .3s linear; 
                transition:all .3s linear;
            }
            .bg-1{
                width:100%;
                height:100%;
                background:url('../res/bg-ecar.jpg');
                background-repeat:no-repeat;
                background-position:0 0;
                -webkit-background-size:cover;
                background-size:cover;
                }
            .wrapper{
                width:25rem;
                color:#fff;
                margin:0 auto;
            }
            .wrapper .topicon{
                text-align:center; 
                padding-top:3rem;
                margin-bottom:4.5rem;
            }
            .wrapper .myfonts{
                font-size:10rem; 
            }
             .wrapper h2{
                font-size:1.6rem;
                font-weight:bold;
                margin-top:4rem;
            }
            .wrapper .detail{
                margin:0 auto; 
            }
             .wrapper .detail .call{
                width:25rem; 
                height:6.5rem;
                display:block;
                border:2px solid #fff;;
                margin: 0 auto;
                color:#fff;
                text-align:center;
                font-size:1.6rem;
                vertical-align:middle;
                line-height:6.5rem;
                margin-top:2.5rem;
                text-decoration:none;
            }
             .wrapper .detail .icon_call{
                font-size:3rem;  
                margin-right:1rem;
            }
             .wrapper .detail p{
                line-height:1.5; 
                font-size:1.8rem;
                margin:0 auto;
                text-shadow:none;
            }
            .wrapper .detail .positionMess p{
                font-weight:bold; 
            }
            .wrapper .detail .positionMess .posDetail p{
                font-size:1.4rem; 
                line-height:1.5rem;
                font-weight:normal;
            }
            .wrapper .btn-down{
                font-size:3rem; 
                color:#fff;
                text-align:center;
                margin-top:10rem;
            }
            .wrapper .detail .list{
                float:left;
                width:14rem;
                border:2px solid #fff;
                height:6.35rem;
                text-align:center;
                font-size:1.6rem;
                display:block;
                color:#fff;
                line-height:6rem;
                text-decoration:none;
            } 
            .wrapper .detail .notice{
                float:left; 
                width:10rem;
                height:6.35rem;
                margin-left:1rem;
                border:2px solid #fff;
                text-align:center;
                font-size:1.6rem;
                display:block;
                color:#fff;
                line-height:6rem;
                text-decoration:none;
            }
            .wrapper .detail .mess .place{
                font-size:1.3rem; 
                line-height:1.5rem;
            }  
            .lost-list{
                width:28rem;
                margin:0 auto;
                padding-top:2rem;
                display:none;
                position:relative;
            }
            .lost-list .title{
                margin-bottom:1.75rem; 
                overflow:hidden;
            }
            .lost-list .title .name{
                width:21.4rem; 
                height:6.35rem;
                float:left;
                text-align:center;
                font-size:1.8rem;
                line-height:6rem;
                color:#fff;
                border:2px solid #fff;
                border-right:none;
            }
            .lost-list .title .close-list{
                width:6.3rem; 
                height:6.3rem;
                display:block;
                float:left;
                border:2px solid #fff;
                text-decoration:none;
                text-align:center;
            }
            .lost-list .title .icon_btnClose{
                font-size:4.5rem; 
                color:#fff;
                line-height:6rem;
            }
            .lost-list .table-list{
                table-layout:fixed; 
                width:100%;
                color:#fff;
            }
            .lost-list thead{
                font-size:1.6rem; 
            }
            .lost-list tbody{
                font-size:1.5rem; 
            }
            .initTranslate{
                transform:translate3d(0,100%,0);  
                -webkit-transform:translate3d(0,100%,0);
            }
            .scrollTranslate{
                transform:translate3d(0,0,0);  
                -webkit-transform:translate3d(0,0,0); 
            }
        </style>
    </head>
    <body>
        <div id="page1" data-role="page" class="bg-1"> 
            <div class="wrapper"> 
                 <div class="topicon">
                     <i class="icon icon_ecar myfonts"></i> 
                     <h2>免费电瓶车</h2>
                 </div>
                 <div class="detail">
                     <p>3号航站楼候机区内电瓶车向旅客提供免费服务，老、弱、病、残、孕及距离起飞时间不足25分钟的急客优先</p>  
                     <a class="call" href="tel:010-8819999">
                         <i class="icon icon_call"></i>呼叫电瓶车 
                     </a>
                 </div>
                 <div class="btn-down"><i class="icon icon_btnDown"></i></div>
             </div>
        </div>
        <div id="page2" data-role="page" class="bg-2">
            <div class="wrapper"> 
                 <div class="topicon">
                     <i class="icon icon_emergency myfonts"></i> 
                     <h2>医疗急救</h2>
                 </div>
                 <div class="detail">
                     <p>医疗急救站为您提供航站楼内出诊，急救及转送病人等服务，并备有各种常用的急救药品。</p>
                     <div class="positionMess">
                         <p>位置与服务时间</p> 
                         <div class="posDetail">
                             <p>国内候机厅C07登机口附近</p>
                             <p>服务时间：06:30-22:00</p>
                         </div>
                     </div>
                     <a class="call" href="tel:010-8819999">
                         <i class="icon icon_call"></i>呼叫电瓶车 
                     </a>
                 </div>
                 <div class="btn-down" style="margin-top:10rem;"><i class="icon icon_btnDown"></i></div>
             </div>
        </div>
        <div id="page3" data-role="page" class="bg-3">
            <div class="wrapper"> 
                 <div class="topicon">
                     <i class="icon icon_lost myfonts"></i> 
                     <h2>失物招领</h2>
                 </div>
                 <div class="detail">
                     <div style="margin-bottom:1.7rem;overflow:hidden;">   
                         <a id="lostlistshow"class="list" href="javascript:;">近期失物清单</a>
                         <a class="notice" href="javascript:;">认领须知</a>
                      </div> 
                     <a class="call" href="tel:010-8819999">
                         <i class="icon icon_call"></i>电话咨询 
                     </a>
                      <div class="mess">
                          <p style="font-weight:bold;font-size:1.5rem;">服务位置</p>
                          <ul class="place">
                              <li>T3-C二层到港大厅A出口东侧</li>
                              <li>T3-C安检后西侧问询柜台内</li>
                              <li>T3-D二层问讯柜台内</li>
                              <li>T3-E海关柜台北侧问讯柜台内</li>
                              </ul>
                      </div>
                 </div>
                 <div class="btn-down" style="margin-top:10rem;"><i class="icon icon_btnDown"></i></div>
             </div>
        </div>
        <div class="lost-list">
                 <div class="title">
                     <div class="name">近期失物清单</div>
                     <a href="javascript:;" class="close-list"><i class="icon icon_btnClose"></i></a>
                 </div> 
                 <table class="table-list">
                     <thead>
                         <tr>
                             <th style="width:9.25rem">物品名称</th> 
                             <th style="width:9.25rem;text-align:center;">捡拾日期</th>
                             <th style="width:9.25rem;text-align:right">捡拾地</th>
                         </tr>
                     </thead>
                     <tbody>
                         <tr>
                             <td>身份证</td>             
                             <td style="text-align:center;">2014-4-17</td>
                             <td style="text-align:right;">飞机上</td>    
                         </tr>
                         <tr>
                             <td>xx身份证</td>             
                             <td style="text-align:center;">2014-4-17</td>
                             <td style="text-align:right;">飞机上</td>    
                         </tr>
                         <tr>
                             <td>身xx份证</td>             
                             <td style="text-align:center;">2014-4-17</td>
                             <td style="text-align:right;">飞机上</td>    
                         </tr>
                         <tr>
                             <td>水壶</td>             
                             <td style="text-align:center;">2014-4-17</td>
                             <td style="text-align:right;">飞机上</td>    
                         </tr>
                     </tbody>
                 </table>
             </div>
        <script>
            (function ($, document) {
                var startx, starty, endx, endy, listshow = 0;
                //$('.btn-down').css('top',($(window).height()/2+130)+'px');
                //返回角度
                function GetSlideAngle(dx, dy) {
                    return Math.atan2(dy, dx) * 180 / Math.PI;
                }

                //根据起点和终点返回方向 1：向上，2：向下，3：向左，4：向右,0：未滑动
                function GetSlideDirection(startX, startY, endX, endY) {
                    var dy = startY - endY;
                    var dx = endX - startX;
                    var result = 0;

                    //如果滑动距离太短
                    if (Math.abs(dx) < 2 && Math.abs(dy) < 2) {
                        return result;
                    }

                    var angle = GetSlideAngle(dx, dy);
                    if (angle >= -45 && angle < 45) {
                        result = 4;
                    } else if (angle >= 45 && angle < 135) {
                        result = 1;
                    } else if (angle >= -135 && angle < -45) {
                        result = 2;
                    }
                    else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {
                        result = 3;
                    }

                    return result;
                }
                function pulldown(targetpage, nextpage) {//下滑动作
                    $('#' + targetpage).removeClass('scrollTranslate');
                    setTimeout(function () {
                        $('#' + targetpage).css('display', 'none');
                    }, 300);
                    $('#' + targetpage).removeClass('ui-page').removeClass('ui-page-theme-a').removeClass('ui-page-active');
                    $('#' + nextpage).css('opacity', 1)
                    $('#' + nextpage).css('display', 'block');
                }
                function pullup(targetpage, nextpage) { //上滑动作
                    $('#' + nextpage).addClass('initTranslate').css('display', 'block');
                    $('#' + targetpage).css({ 'opacity': 0.75 });

                    setTimeout(function () {
                        $('#' + nextpage).addClass('scrollTranslate');
                        $('#' + nextpage).addClass('ui-page').addClass('ui-page-theme-a').addClass('ui-page-active');
                    }, 300);
                }
                $(document).on('pageinit', '#page1', function () {
                    //$(this).on('swipeleft', function (e) {
                    //    $.mobile.changePage('#page2', {
                    //        transition: 'slide'
                    //    });
                    //});
                    //$(this).find('.btn-down').on('click',function(){
                    //    $.mobile.changePage('#page2',{
                    //        transition:'slideup'
                    //    });
                    //});
                    //$('#page2').find('.btn-down').on('click',function(){
                    //        $.mobile.changePage('#page3',{
                    //        transition:'slideup'
                    //    }); 
                    //});
                    $('#page3').find('#lostlistshow').on('click', function () {
                        $('#page3 .wrapper').fadeOut(function () {
                            $('#page3').css('-webkit-filter', 'blur(3px)');
                            $('.lost-list').fadeIn();
                            listshow = 1;
                        });
                    });
                    $('.close-list').on('click', function () {
                        $('.lost-list').fadeOut(function () {
                            $('#page3').css('-webkit-filter', 'none');
                            $('#page3 .wrapper').fadeIn();
                            listshow = 0;
                        });
                    });
                    $('#page1 .btn-down').on('click', function () {
                        $('#page2').addClass('initTranslate').css('display', 'block');
                        $('#page1').css('opacity', 0.75);
                        //$('#page1').css('-webkit-transform','scale(0.95,0.95)')
                        setTimeout(function () {
                            $('#page2').addClass('scrollTranslate');
                            $('#page2').addClass('ui-page').addClass('ui-page-theme-a').addClass('ui-page-active');
                        }, 300)
                        setTimeout(function () {
                            $('#page1').css('display', 'none');
                        }, 800)
                    });
                    $('#page2 .btn-down').on('click', function () {
                        $('#page3').addClass('initTranslate').css('display', 'block');
                        $('#page2').css('opacity', 0.75);
                        setTimeout(function () {
                            $('#page3').addClass('scrollTranslate');
                            $('#page3').addClass('ui-page').addClass('ui-page-theme-a').addClass('ui-page-active');
                        }, 300)
                    });
                    $('#page1').on('touchstart', function (e) {
                        startx = e.originalEvent.targetTouches[0].pageX;
                        starty = e.originalEvent.targetTouches[0].pageY;
                    });
                    $('#page1').on('touchmove', function (e) {
                        e.preventDefault();
                        //movex = e.originalEvent.changedTouches[0].pageX;
                        //movey = e.originalEvent.changedTouches[0].pageY;
                        //var direction = GetSlideDirection(startx, starty, movex, movey);
                        //var dy = Math.abs(starty - movey);
                        //switch(direction){
                        //    case 1:
                        //    $('#page2').addClass('initTranslate').css('display','block');
                        //    $('#page2')[0].style['transform'] = 'translate3d(0,'+($(window).height()-movey)+'px,0)'; 
                        //    setTimeout(function(){
                        //        
                        //    },200);
                        //     break;
                        //}
                    });
                    $('#page1').on('touchend', function (e) {
                        endx = e.originalEvent.changedTouches[0].pageX;
                        endy = e.originalEvent.changedTouches[0].pageY;
                        var direction = GetSlideDirection(startx, starty, endx, endy);
                        var dy = Math.abs(starty - endy);
                        switch (direction) {
                            case 1:
                                if (dy > 50) {
                                    pullup('page1', 'page2');
                                    setTimeout(function () {
                                        $('#page1').css('display', 'none');
                                    }, 800);
                                }
                                break;
                        }
                    });
                    $('#page2').on('touchstart', function (e) {
                        startx = e.originalEvent.targetTouches[0].pageX;
                        starty = e.originalEvent.targetTouches[0].pageY;
                    });
                    $('#page2').on('touchmove', function (e) {
                        //e.preventDefault(); 
                    });
                    $('#page2').on('touchend', function (e) {
                        endx = e.originalEvent.changedTouches[0].pageX;
                        endy = e.originalEvent.changedTouches[0].pageY;
                        var direction = GetSlideDirection(startx, starty, endx, endy);
                        var dy = Math.abs(starty - endy);
                        switch (direction) {
                            case 1:
                                if (dy > 90) {
                                    pullup('page2', 'page3');
                                }
                                break;
                            case 2:
                                if (dy > 90) {
                                    pulldown('page2', 'page1');
                                }
                                break;
                        }
                    });
                    $('#page3').on('touchstart', function (e) {
                        startx = e.originalEvent.targetTouches[0].pageX;
                        starty = e.originalEvent.targetTouches[0].pageY;
                    });
                    $('#page3').on('touchmove', function (e) {
                        //e.preventDefault(); 
                    });
                    $('#page3').on('touchend', function (e) {
                        endx = e.originalEvent.changedTouches[0].pageX;
                        endy = e.originalEvent.changedTouches[0].pageY;
                        var direction = GetSlideDirection(startx, starty, endx, endy);
                        var dy = Math.abs(starty - endy);
                        switch (direction) {
                            case 2:
                                if (dy > 90 && listshow == 0) {
                                    pulldown('page3', 'page2');
                                }
                                break;
                        }
                    });
                    /*$('#page1').on('touchmove',function(e){
                    endx = e.originalEvent.changedTouches[0].pageX;
                    endy = e.originalEvent.changedTouches[0].pageY; 
                    var direction = GetSlideDirection(startx, starty, endx, endy);
                    switch (direction) {
                    case 0:
                    alert("没滑动");
                    break;
                    case 1:
                    $('#page1').css('opacity',0.8);
                    $('#page1').css('position','fixed');
                    $('#page2').css({
                    'display':'block',
                    'top': $(window).height()-$(window).scrollTop()
                    });
                    if($(window).scrollTop()>50){
                    //  $('#page2').css('top','0px')     
                    }else{
                    }
                    break;
                    case 2:
                    $('#page2').css({
                    'top': $(window).height()-$(window).scrollTop()
                    });
                    break;
                    case 3:
                    break;
                    case 4:
                    break;
                    default:            
                    }   
                    });*/

                });
            })($, document);
            
            </script>
     <body>
</html>

